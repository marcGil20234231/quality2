import{a as L}from"./chunk-ELJGKPYX.js";import{a as O}from"./chunk-M75XJNAF.js";import"./chunk-B2SMLHQB.js";import{c as T,g as F,j as A}from"./chunk-KNHRAYHO.js";import{Aa as p,Fa as C,Ja as d,Jb as y,Kb as E,Nb as k,Ob as w,Qa as l,Ta as o,Ua as n,Va as v,Ya as x,Z as g,Za as S,_,_a as c,db as s,eb as m,fb as u,lb as f,nb as h,qb as I,ta as b,wa as r}from"./chunk-4NTA57OQ.js";import"./chunk-2NFLSA4Y.js";var j=e=>["/courses",e],P=e=>["/courses/edit",e];function V(e,i){e&1&&(o(0,"div",7)(1,"a",8),v(2,"i",9),s(3,"Add New Course "),n()())}function $(e,i){e&1&&(o(0,"div",10)(1,"div",11)(2,"span",12),s(3,"Loading..."),n()()())}function R(e,i){if(e&1&&(o(0,"div",13),s(1),n()),e&2){let t=c();r(),u(" ",t.error," ")}}function U(e,i){e&1&&(o(0,"div",14),s(1," No courses found. "),n())}function z(e,i){if(e&1&&(o(0,"button",31),s(1," Edit "),n()),e&2){let t=c().$implicit;l("routerLink",f(1,P,t.id))}}function B(e,i){if(e&1){let t=x();o(0,"button",32),S("click",function(){g(t);let D=c().$implicit,M=c(2);return _(M.deleteCourse(D.id))}),s(1," Delete "),n()}}function H(e,i){if(e&1&&(o(0,"div",17)(1,"div",18),v(2,"img",19),o(3,"div",20)(4,"h5",21),s(5),n(),o(6,"h6",22),s(7),n(),o(8,"p",23),s(9),h(10,"slice"),n(),o(11,"div",24)(12,"span",25),s(13),n(),o(14,"span",26),s(15),n()()(),o(16,"div",27)(17,"a",28),s(18," View Details "),n(),d(19,z,2,3,"button",29)(20,B,2,0,"button",30),n()()()),e&2){let t=i.$implicit,a=c(2);r(2),l("src",t.imageUrl||"/assets/images/default-course.jpg",b)("alt",t.title),r(3),m(t.title),r(2),m(t.category),r(2),u("",I(10,10,t.description,0,100),"..."),r(4),m(t.level),r(2),u("",t.duration," hours"),r(2),l("routerLink",f(14,j,t.id)),r(2),l("ngIf",a.authService.isAdmin()),r(),l("ngIf",a.authService.isAdmin())}}function q(e,i){if(e&1&&(o(0,"div",15),d(1,H,21,16,"div",16),n()),e&2){let t=c();r(),l("ngForOf",t.courses)}}var N=class e{constructor(i,t){this.courseService=i;this.authService=t}courses=[];loading=!0;error=null;ngOnInit(){this.loadCourses()}loadCourses(){this.loading=!0,this.error=null,this.courseService.getCourses().subscribe({next:i=>{console.log("Courses loaded:",i),this.courses=i,this.loading=!1},error:i=>{console.error("Error loading courses:",i),this.error="Failed to load courses. Please try again later.",this.loading=!1}})}deleteCourse(i){confirm("Are you sure you want to delete this course?")&&this.courseService.deleteCourse(i).subscribe({next:()=>{this.courses=this.courses.filter(t=>t.id!==i)},error:t=>{console.error("Error deleting course:",t),alert("Failed to delete course. Please try again.")}})}static \u0275fac=function(t){return new(t||e)(p(O),p(L))};static \u0275cmp=C({type:e,selectors:[["app-courses"]],decls:9,vars:5,consts:[[1,"container","my-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["class","action-buttons",4,"ngIf"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","row",4,"ngIf"],[1,"action-buttons"],["routerLink","/courses/new",1,"btn","btn-danger"],[1,"bi","bi-plus-circle","me-2"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"alert","alert-info"],[1,"row"],["class","col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","mb-4"],[1,"card","h-100"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"mt-3"],[1,"badge","bg-danger","me-2"],[1,"badge","bg-secondary"],[1,"card-footer","bg-light"],[1,"btn","btn-outline-danger","btn-sm","me-2",3,"routerLink"],["class","btn btn-outline-dark btn-sm me-2",3,"routerLink",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-outline-dark","btn-sm","me-2",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Our Courses"),n(),d(4,V,4,0,"div",2),n(),d(5,$,4,0,"div",3)(6,R,2,1,"div",4)(7,U,2,0,"div",5)(8,q,2,1,"div",6),n()),t&2&&(r(4),l("ngIf",a.authService.isAdmin()),r(),l("ngIf",a.loading),r(),l("ngIf",a.error),r(),l("ngIf",!a.loading&&!a.error&&a.courses.length===0),r(),l("ngIf",!a.loading&&!a.error))},dependencies:[w,y,E,k,A,F,T],encapsulation:2})};export{N as CoursesComponent};
