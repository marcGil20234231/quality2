import{a as G}from"./chunk-ESCU5HRN.js";import{b as M,c as s,d as R,e as k,g as w,j as z,l as D,m as P,s as V,u as B}from"./chunk-WRGOV7ZX.js";import"./chunk-B2SMLHQB.js";import{d as A,f as q,j as U}from"./chunk-KNHRAYHO.js";import{Aa as h,Fa as y,Ib as x,Ja as d,Jb as I,Kb as N,Ob as j,Qa as m,Ta as n,Ua as r,Va as c,Ya as T,Z as S,Za as b,_ as C,_a as p,db as l,eb as F,fb as E,lb as f,wa as o}from"./chunk-4NTA57OQ.js";import{a as g,b as _}from"./chunk-2NFLSA4Y.js";var v=e=>({"is-invalid":e});function J(e,a){e&1&&(n(0,"div"),l(1,"Name is required"),r())}function Y(e,a){e&1&&(n(0,"div"),l(1,"Name must be at least 3 characters"),r())}function H(e,a){if(e&1&&(n(0,"div",32),d(1,J,2,0,"div",33)(2,Y,2,0,"div",33),r()),e&2){let i=p();o(),m("ngIf",i.f.name.errors.required),o(),m("ngIf",i.f.name.errors.minlength)}}function K(e,a){e&1&&(n(0,"div"),l(1,"Professional title is required"),r())}function Q(e,a){if(e&1&&(n(0,"div",32),d(1,K,2,0,"div",33),r()),e&2){let i=p();o(),m("ngIf",i.f.fullName.errors.required)}}function W(e,a){e&1&&(n(0,"div"),l(1,"Email is required"),r())}function X(e,a){e&1&&(n(0,"div"),l(1,"Please enter a valid email"),r())}function Z(e,a){if(e&1&&(n(0,"div",32),d(1,W,2,0,"div",33)(2,X,2,0,"div",33),r()),e&2){let i=p();o(),m("ngIf",i.f.email.errors.required),o(),m("ngIf",i.f.email.errors.email)}}function $(e,a){e&1&&(n(0,"div"),l(1,"Specialization is required"),r())}function ee(e,a){if(e&1&&(n(0,"div",32),d(1,$,2,0,"div",33),r()),e&2){let i=p();o(),m("ngIf",i.f.specialization.errors.required)}}function te(e,a){e&1&&(n(0,"div"),l(1,"Image URL is required"),r())}function ie(e,a){e&1&&(n(0,"div"),l(1,"Please enter a valid URL"),r())}function re(e,a){if(e&1&&(n(0,"div",32),d(1,te,2,0,"div",33)(2,ie,2,0,"div",33),r()),e&2){let i=p();o(),m("ngIf",i.f.imageUrl.errors.required),o(),m("ngIf",i.f.imageUrl.errors.pattern)}}function ne(e,a){if(e&1){let i=T();n(0,"div",34),c(1,"input",35),n(2,"button",36),b("click",function(){let u=S(i).index,O=p();return C(O.removeSubject(u))}),c(3,"i",37),r()()}if(e&2){let i=a.index;o(),m("formControlName",i)}}function ae(e,a){e&1&&(n(0,"div"),l(1,"Biography is required"),r())}function oe(e,a){e&1&&(n(0,"div"),l(1,"Biography must be at least 50 characters"),r())}function me(e,a){if(e&1&&(n(0,"div",32),d(1,ae,2,0,"div",33)(2,oe,2,0,"div",33),r()),e&2){let i=p();o(),m("ngIf",i.f.bio.errors.required),o(),m("ngIf",i.f.bio.errors.minlength)}}function le(e,a){e&1&&c(0,"span",38)}var L=class e{constructor(a,i,t,u){this.fb=a;this.teacherService=i;this.router=t;this.route=u;this.teacherForm=this.fb.group({name:["",[s.required,s.minLength(3)]],fullName:["",[s.required]],email:["",[s.required,s.email]],specialization:["",[s.required]],imageUrl:["",[s.required,s.pattern("https?://.*")]],teachingSubjects:this.fb.array([]),bio:["",[s.required,s.minLength(50)]]})}teacherForm;isEditMode=!1;submitted=!1;loading=!1;error="";get f(){return this.teacherForm.controls}get teachingSubjectsArray(){return this.teacherForm.get("teachingSubjects")}addSubject(){this.teachingSubjectsArray.push(this.fb.control(""))}removeSubject(a){this.teachingSubjectsArray.removeAt(a)}ngOnInit(){this.teachingSubjectsArray.length===0&&this.addSubject();let a=this.route.snapshot.paramMap.get("id");a&&(this.isEditMode=!0,this.loadTeacher(+a))}loadTeacher(a){this.teacherService.getTeacher(a).subscribe({next:i=>{for(;this.teachingSubjectsArray.length;)this.teachingSubjectsArray.removeAt(0);i.teachingSubjects.forEach(t=>{this.teachingSubjectsArray.push(this.fb.control(t))}),this.teacherForm.patchValue({name:i.name,fullName:i.fullName,email:i.email,specialization:i.specialization,imageUrl:i.imageUrl,bio:i.bio})},error:i=>{console.error("Error loading teacher:",i),this.router.navigate(["/teachers"])}})}onSubmit(){if(this.submitted=!0,this.teacherForm.invalid)return;this.loading=!0;let a=this.teacherForm.value,i=_(g({},a),{profileImage:a.imageUrl,courses:[]});if(this.isEditMode){let t=this.route.snapshot.paramMap.get("id");t&&this.teacherService.updateTeacher(+t,i).subscribe({next:()=>{this.router.navigate(["/teachers"])},error:u=>{this.error=u.message||"Error updating teacher",this.loading=!1}})}else this.teacherService.createTeacher(i).subscribe({next:()=>{this.router.navigate(["/teachers"])},error:t=>{this.error=t.message||"Error creating teacher",this.loading=!1}})}onCancel(){this.router.navigate(["/teachers"])}static \u0275fac=function(i){return new(i||e)(h(V),h(G),h(q),h(A))};static \u0275cmp=y({type:e,selectors:[["app-teacher-form"]],decls:55,vars:30,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow"],[1,"card-header","bg-danger","text-white"],[1,"mb-0"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","fullName",1,"form-label"],["type","text","id","fullName","formControlName","fullName","placeholder","e.g. Dr. John Doe, Ph.D.",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","specialization",1,"form-label"],["type","text","id","specialization","formControlName","specialization",1,"form-control",3,"ngClass"],["for","imageUrl",1,"form-label"],["type","text","id","imageUrl","formControlName","imageUrl","placeholder","https://example.com/image.jpg",1,"form-control",3,"ngClass"],[1,"form-text","text-muted"],["for","teachingSubjects",1,"form-label"],["formArrayName","teachingSubjects"],["class","input-group mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-plus-circle","me-1"],["for","bio",1,"form-label"],["id","bio","formControlName","bio","rows","4",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"input-group","mb-2"],["placeholder","Enter subject",1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),l(6),r()(),n(7,"div",6)(8,"form",7),b("ngSubmit",function(){return t.onSubmit()}),n(9,"div",8)(10,"label",9),l(11,"Full Name"),r(),c(12,"input",10),d(13,H,3,2,"div",11),r(),n(14,"div",8)(15,"label",12),l(16,"Professional Title"),r(),c(17,"input",13),d(18,Q,2,1,"div",11),r(),n(19,"div",8)(20,"label",14),l(21,"Email"),r(),c(22,"input",15),d(23,Z,3,2,"div",11),r(),n(24,"div",8)(25,"label",16),l(26,"Specialization"),r(),c(27,"input",17),d(28,ee,2,1,"div",11),r(),n(29,"div",8)(30,"label",18),l(31,"Profile Image URL"),r(),c(32,"input",19),d(33,re,3,2,"div",11),n(34,"small",20),l(35," You can use a URL from randomuser.me or any other image hosting service "),r()(),n(36,"div",8)(37,"label",21),l(38,"Teaching Subjects"),r(),n(39,"div",22),d(40,ne,4,1,"div",23),r(),n(41,"button",24),b("click",function(){return t.addSubject()}),c(42,"i",25),l(43,"Add Subject "),r()(),n(44,"div",8)(45,"label",26),l(46,"Biography"),r(),c(47,"textarea",27),d(48,me,3,2,"div",11),r(),n(49,"div",28)(50,"button",29),b("click",function(){return t.onCancel()}),l(51,"Cancel"),r(),n(52,"button",30),d(53,le,1,0,"span",31),l(54),r()()()()()()()()),i&2&&(o(6),F(t.isEditMode?"Edit Teacher":"Add New Teacher"),o(2),m("formGroup",t.teacherForm),o(4),m("ngClass",f(18,v,t.submitted&&t.f.name.errors)),o(),m("ngIf",t.submitted&&t.f.name.errors),o(4),m("ngClass",f(20,v,t.submitted&&t.f.fullName.errors)),o(),m("ngIf",t.submitted&&t.f.fullName.errors),o(4),m("ngClass",f(22,v,t.submitted&&t.f.email.errors)),o(),m("ngIf",t.submitted&&t.f.email.errors),o(4),m("ngClass",f(24,v,t.submitted&&t.f.specialization.errors)),o(),m("ngIf",t.submitted&&t.f.specialization.errors),o(4),m("ngClass",f(26,v,t.submitted&&t.f.imageUrl.errors)),o(),m("ngIf",t.submitted&&t.f.imageUrl.errors),o(7),m("ngForOf",t.teachingSubjectsArray.controls),o(7),m("ngClass",f(28,v,t.submitted&&t.f.bio.errors)),o(),m("ngIf",t.submitted&&t.f.bio.errors),o(4),m("disabled",t.loading),o(),m("ngIf",t.loading),o(),E(" ",t.isEditMode?"Update":"Create"," "))},dependencies:[j,x,I,N,B,w,M,R,k,z,P,D,U],encapsulation:2})};export{L as TeacherFormComponent};
