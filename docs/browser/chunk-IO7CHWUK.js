import{a as F}from"./chunk-PHU35YRT.js";import{a as N}from"./chunk-ESCU5HRN.js";import{a as D}from"./chunk-M75XJNAF.js";import"./chunk-B2SMLHQB.js";import{f as L,g as A,j as T}from"./chunk-KNHRAYHO.js";import{Aa as u,Fa as E,Ja as p,Jb as k,Kb as y,Ob as w,Qa as s,Ta as e,Ua as t,Va as m,Ya as C,Z as g,Za as _,_ as f,_a as v,db as i,eb as l,fb as I,lb as h,wa as d}from"./chunk-4NTA57OQ.js";import{a as S,b as x}from"./chunk-2NFLSA4Y.js";var R=a=>["/students",a],j=a=>["/courses",a],O=a=>["/courses/edit",a];function V(a,r){a&1&&(e(0,"div",36)(1,"div",37)(2,"span",38),i(3,"Loading..."),t()()())}function P(a,r){if(a&1&&(e(0,"div",39),i(1),t()),a&2){let n=v();d(),I(" ",n.error," ")}}function $(a,r){if(a&1){let n=C();e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td")(14,"a",40),m(15,"i",41),i(16," View "),t(),e(17,"button",42),_("click",function(){let c=g(n).$implicit,b=v();return f(b.deleteStudent(c.id))}),m(18,"i",43),i(19," Delete "),t()()()}if(a&2){let n=r.$implicit;d(2),l(n.name),d(2),l(n.studentId),d(2),l(n.yearLevel),d(2),l(n.program),d(2),l(n.major),d(2),l(n.email),d(2),s("routerLink",h(7,R,n.id))}}function Q(a,r){a&1&&(e(0,"tr")(1,"td",44),i(2,"No students found"),t()())}function U(a,r){if(a&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td")(8,"a",40),i(9,"View"),t(),e(10,"a",45),i(11,"Edit"),t()()()),a&2){let n=r.$implicit;d(2),l(n.title),d(2),l(n.instructorName),d(2),l(n.enrolledStudents?n.enrolledStudents.length:0),d(2),s("routerLink",h(5,j,n.id)),d(2),s("routerLink",h(7,O,n.id))}}function Y(a,r){a&1&&(e(0,"tr")(1,"td",46),i(2,"No courses available"),t()())}var M=class a{constructor(r,n,o,c){this.courseService=r;this.teacherService=n;this.studentService=o;this.router=c}courses=[];teachers=[];students=[];recentCourses=[];isLoading=!0;error="";ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.isLoading=!0,this.error="",this.courseService.getCourses().subscribe({next:r=>{console.log("Courses:",r),this.teacherService.getTeachers().subscribe({next:n=>{console.log("Teachers:",n),this.courses=r,this.teachers=n,this.recentCourses=r.slice(0,5).map(o=>{let c=n.find(b=>b.id===o.teacherId);return x(S({},o),{instructorName:c?c.name:"Unknown"})}),this.isLoading=!1},error:n=>{console.error("Error loading teachers:",n),this.error="Failed to load teachers.",this.isLoading=!1}})},error:r=>{console.error("Error loading courses:",r),this.error="Failed to load courses.",this.isLoading=!1}}),this.studentService.getStudents().subscribe({next:r=>{console.log("Students:",r),this.students=r},error:r=>{console.error("Error loading students:",r),this.error="Failed to load students."}})}deleteStudent(r){confirm("Are you sure you want to delete this student?")&&this.studentService.deleteStudent(r).subscribe({next:()=>{this.students=this.students.filter(n=>n.id!==r)},error:n=>{console.error("Error deleting student:",n),alert("Failed to delete student. Please try again.")}})}static \u0275fac=function(n){return new(n||a)(u(D),u(N),u(F),u(L))};static \u0275cmp=E({type:a,selectors:[["app-admin-dashboard"]],decls:113,vars:9,consts:[[1,"container","my-4"],[1,"mb-4"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"row"],[1,"col-md-4","mb-4"],[1,"card","bg-danger","text-white"],[1,"card-body"],[1,"card-title"],[1,"display-4"],[1,"card-text"],["routerLink","/courses",1,"btn","btn-outline-light"],[1,"card","bg-dark","text-white"],["routerLink","/teachers",1,"btn","btn-outline-light"],["routerLink","/students",1,"btn","btn-outline-light"],[1,"card","mb-4"],[1,"card-header","bg-danger","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["routerLink","/students/new",1,"btn","btn-light","btn-sm"],[1,"bi","bi-plus-circle"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-header","bg-danger","text-white"],[1,"text-end"],["routerLink","/courses",1,"btn","btn-danger"],[1,"card"],[1,"card-header","bg-dark","text-white"],[1,"col-md-3"],["routerLink","/courses/new",1,"btn","btn-outline-danger","d-block","mb-2"],["routerLink","/teachers/new",1,"btn","btn-outline-danger","d-block","mb-2"],[1,"bi","bi-person-plus"],["routerLink","/students/new",1,"btn","btn-outline-danger","d-block","mb-2"],["routerLink","/resources/new",1,"btn","btn-outline-danger","d-block","mb-2"],[1,"bi","bi-file-earmark-plus"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"btn","btn-sm","btn-outline-danger","me-2",3,"routerLink"],[1,"bi","bi-eye"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["colspan","7",1,"text-center"],[1,"btn","btn-sm","btn-outline-dark",3,"routerLink"],["colspan","4",1,"text-center"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"h1",1),i(2,"Admin Dashboard"),t(),p(3,V,4,0,"div",2)(4,P,2,1,"div",3),e(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h5",8),i(10,"Total Courses"),t(),e(11,"h2",9),i(12),t(),e(13,"p",10),i(14,"Available courses on the platform"),t(),e(15,"a",11),i(16,"Manage Courses"),t()()()(),e(17,"div",5)(18,"div",12)(19,"div",7)(20,"h5",8),i(21,"Total Teachers"),t(),e(22,"h2",9),i(23),t(),e(24,"p",10),i(25,"Registered teachers on the platform"),t(),e(26,"a",13),i(27,"Manage Teachers"),t()()()(),e(28,"div",5)(29,"div",6)(30,"div",7)(31,"h5",8),i(32,"Total Students"),t(),e(33,"h2",9),i(34),t(),e(35,"p",10),i(36,"Registered students on the platform"),t(),e(37,"a",14),i(38,"Manage Students"),t()()()()(),e(39,"div",15)(40,"div",16)(41,"h5",17),i(42,"Student Management"),t(),e(43,"a",18),m(44,"i",19),i(45," Add New Student "),t()(),e(46,"div",7)(47,"div",20)(48,"table",21)(49,"thead")(50,"tr")(51,"th"),i(52,"Name"),t(),e(53,"th"),i(54,"Student ID"),t(),e(55,"th"),i(56,"Year Level"),t(),e(57,"th"),i(58,"Program"),t(),e(59,"th"),i(60,"Major"),t(),e(61,"th"),i(62,"Email"),t(),e(63,"th"),i(64,"Actions"),t()()(),e(65,"tbody"),p(66,$,20,9,"tr",22)(67,Q,3,0,"tr",23),t()()()()(),e(68,"div",15)(69,"div",24)(70,"h5",17),i(71,"Recently Added Courses"),t()(),e(72,"div",7)(73,"div",20)(74,"table",21)(75,"thead")(76,"tr")(77,"th"),i(78,"Title"),t(),e(79,"th"),i(80,"Instructor"),t(),e(81,"th"),i(82,"Students"),t(),e(83,"th"),i(84,"Actions"),t()()(),e(85,"tbody"),p(86,U,12,9,"tr",22)(87,Y,3,0,"tr",23),t()()(),e(88,"div",25)(89,"a",26),i(90,"View All Courses"),t()()()(),e(91,"div",27)(92,"div",28)(93,"h5",17),i(94,"Quick Actions"),t()(),e(95,"div",7)(96,"div",4)(97,"div",29)(98,"a",30),m(99,"i",19),i(100," Add New Course "),t()(),e(101,"div",29)(102,"a",31),m(103,"i",32),i(104," Add New Teacher "),t()(),e(105,"div",29)(106,"a",33),m(107,"i",32),i(108," Add New Student "),t()(),e(109,"div",29)(110,"a",34),m(111,"i",35),i(112," Add New Resource "),t()()()()()()),n&2&&(d(3),s("ngIf",o.isLoading),d(),s("ngIf",o.error&&!o.isLoading),d(8),l(o.courses.length),d(11),l(o.teachers.length),d(11),l(o.students.length),d(32),s("ngForOf",o.students),d(),s("ngIf",o.students.length===0),d(19),s("ngForOf",o.recentCourses),d(),s("ngIf",o.recentCourses.length===0))},dependencies:[w,k,y,T,A],encapsulation:2})};export{M as AdminDashboardComponent};
