import{a as F}from"./chunk-ESCU5HRN.js";import{a as y}from"./chunk-ELJGKPYX.js";import{a as D}from"./chunk-M75XJNAF.js";import"./chunk-B2SMLHQB.js";import{d as E,g as C,j as I}from"./chunk-KNHRAYHO.js";import{Aa as s,Fa as x,Ja as d,Jb as S,Kb as _,Ob as T,Qa as l,Ta as i,Ua as t,Va as p,_a as u,db as r,eb as m,fb as v,kb as b,lb as h,ta as g,wa as a}from"./chunk-4NTA57OQ.js";import"./chunk-2NFLSA4Y.js";var k=()=>["/teachers"],A=n=>["/teachers/edit",n],O=n=>["/courses",n];function j(n,o){n&1&&(i(0,"div",4)(1,"div",5)(2,"span",6),r(3,"Loading..."),t()()())}function w(n,o){n&1&&(i(0,"div",7),r(1," Teacher not found or has been removed. "),t())}function N(n,o){if(n&1&&(i(0,"span",31),r(1),t()),n&2){let e=o.$implicit;a(),v(" ",e," ")}}function M(n,o){if(n&1&&(i(0,"a",32),p(1,"i",33),r(2," Edit Profile "),t()),n&2){let e=u(2);l("routerLink",h(1,A,e.teacher.id))}}function R(n,o){n&1&&(i(0,"div",34),r(1," No courses currently assigned. "),t())}function P(n,o){if(n&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td")(8,"a",37),r(9," View Course "),t()()()),n&2){let e=o.$implicit;a(2),m(e.title),a(2),m(e.category),a(2),m(e.level),a(2),l("routerLink",h(4,O,e.id))}}function z(n,o){if(n&1&&(i(0,"table",35)(1,"thead")(2,"tr")(3,"th"),r(4,"Title"),t(),i(5,"th"),r(6,"Category"),t(),i(7,"th"),r(8,"Level"),t(),i(9,"th"),r(10,"Actions"),t()()(),i(11,"tbody"),d(12,P,10,6,"tr",36),t()()),n&2){let e=u(2);a(12),l("ngForOf",e.courses)}}function U(n,o){if(n&1&&(i(0,"div",8)(1,"div",9)(2,"div",10),p(3,"img",11),i(4,"div",12)(5,"h3",13),r(6),t(),i(7,"h6",14),r(8),t(),i(9,"p",15)(10,"strong"),r(11,"Email:"),t(),r(12),t(),i(13,"div",16)(14,"h6"),r(15,"Teaching Subjects:"),t(),i(16,"div",17),d(17,N,2,1,"span",18),t()(),i(18,"p",19)(19,"strong"),r(20,"Courses:"),t(),r(21),t()()(),i(22,"div",16)(23,"a",20),p(24,"i",21),r(25," Back to Teachers "),t(),d(26,M,3,3,"a",22),t()(),i(27,"div",23)(28,"div",24)(29,"div",25)(30,"h4",26),r(31,"About"),t()(),i(32,"div",12)(33,"p",15),r(34),t()()(),i(35,"div",27)(36,"div",25)(37,"h4",26),r(38,"Courses"),t()(),i(39,"div",12),d(40,R,2,0,"div",28),i(41,"div",29),d(42,z,13,1,"table",30),t()()()()()),n&2){let e=u();a(3),l("src",e.teacher.imageUrl,g)("alt",e.teacher.name),a(3),m(e.teacher.fullName),a(2),m(e.teacher.specialization),a(4),v(" ",e.teacher.email,""),a(5),l("ngForOf",e.teacher.teachingSubjects),a(4),v(" ",e.teacher.courses.length||0,""),a(2),l("routerLink",b(12,k)),a(3),l("ngIf",e.authService.isAdmin()),a(8),m(e.teacher.bio),a(6),l("ngIf",e.courses.length===0),a(2),l("ngIf",e.courses.length>0)}}var L=class n{constructor(o,e,c,f){this.route=o;this.teacherService=e;this.courseService=c;this.authService=f}teacher=null;courses=[];loading=!0;ngOnInit(){this.route.paramMap.subscribe(o=>{let e=o.get("id");e?this.loadTeacher(+e):this.loading=!1})}loadTeacher(o){this.teacherService.getTeacher(o).subscribe({next:e=>{this.teacher=e,this.loadTeacherCourses(e.courses||[]),this.loading=!1},error:e=>{console.error("Error loading teacher:",e),this.loading=!1}})}loadTeacherCourses(o){if(o.length===0){this.courses=[];return}let e=o.map(c=>this.courseService.getCourse(c));Promise.all(e.map(c=>c.toPromise())).then(c=>{this.courses=c.filter(f=>f!==void 0)}).catch(c=>{console.error("Error loading courses:",c),this.courses=[]})}static \u0275fac=function(e){return new(e||n)(s(E),s(F),s(D),s(y))};static \u0275cmp=x({type:n,selectors:[["app-teacher-detail"]],decls:4,vars:3,consts:[[1,"container","mt-4"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"row"],[1,"col-md-4","mb-4"],[1,"card","border-danger"],[1,"card-img-top",2,"height","300px","object-fit","cover",3,"src","alt"],[1,"card-body"],[1,"card-title","text-danger"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"mt-3"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-secondary",4,"ngFor","ngForOf"],[1,"card-text","mt-3"],[1,"btn","btn-outline-secondary","me-2",3,"routerLink"],[1,"bi","bi-arrow-left"],["class","btn btn-outline-danger",3,"routerLink",4,"ngIf"],[1,"col-md-8"],[1,"card","mb-4"],[1,"card-header","bg-danger","text-white"],[1,"mb-0"],[1,"card"],["class","alert alert-info",4,"ngIf"],[1,"table-responsive"],["class","table table-striped table-hover",4,"ngIf"],[1,"badge","bg-secondary"],[1,"btn","btn-outline-danger",3,"routerLink"],[1,"bi","bi-pencil"],[1,"alert","alert-info"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-danger",3,"routerLink"]],template:function(e,c){e&1&&(i(0,"div",0),d(1,j,4,0,"div",1)(2,w,2,0,"div",2)(3,U,43,13,"div",3),t()),e&2&&(a(),l("ngIf",c.loading),a(),l("ngIf",!c.loading&&!c.teacher),a(),l("ngIf",c.teacher))},dependencies:[T,S,_,I,C],encapsulation:2})};export{L as TeacherDetailComponent};
