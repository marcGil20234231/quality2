import{a as F}from"./chunk-PHU35YRT.js";import{a as A}from"./chunk-M75XJNAF.js";import"./chunk-B2SMLHQB.js";import{e as y,h as D,k as T}from"./chunk-4BZPK5W5.js";import{Aa as p,Fa as g,Ja as m,Jb as E,Kb as h,Mb as I,Ob as C,Qa as l,Ta as i,Ua as t,Va as v,_a as u,db as r,eb as o,fb as c,kb as S,lb as f,nb as _,pb as b,ta as x,wa as a}from"./chunk-4NTA57OQ.js";import"./chunk-2NFLSA4Y.js";var L=()=>["/students"],w=n=>["/students/edit",n],k=n=>["/courses",n];function j(n,d){n&1&&(i(0,"div",4)(1,"div",5)(2,"span",6),r(3,"Loading..."),t()()())}function M(n,d){n&1&&(i(0,"div",7),r(1," Student not found or has been removed. "),t())}function N(n,d){if(n&1&&(i(0,"a",31),v(1,"i",32),r(2," Edit Profile "),t()),n&2){let e=u(2);l("routerLink",f(1,w,e.student.id))}}function P(n,d){if(n&1&&(i(0,"li",33),r(1),t()),n&2){let e=d.$implicit;a(),c(" ",e," ")}}function R(n,d){n&1&&(i(0,"div",34),r(1," No courses currently enrolled. "),t())}function $(n,d){if(n&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td")(8,"a",37),r(9," View Course "),t()()()),n&2){let e=d.$implicit;a(2),o(e.code),a(2),o(e.title),a(2),o(e.credits),a(2),l("routerLink",f(4,k,e.id))}}function B(n,d){if(n&1&&(i(0,"table",35)(1,"thead")(2,"tr")(3,"th"),r(4,"Course Code"),t(),i(5,"th"),r(6,"Title"),t(),i(7,"th"),r(8,"Credits"),t(),i(9,"th"),r(10,"Actions"),t()()(),i(11,"tbody"),m(12,$,10,6,"tr",36),t()()),n&2){let e=u(2);a(12),l("ngForOf",e.enrolledCourses)}}function z(n,d){n&1&&(i(0,"div",34),r(1," No achievements recorded yet. "),t())}function U(n,d){if(n&1&&(i(0,"li",33)(1,"div",39)(2,"div")(3,"h5",40),r(4),t(),i(5,"p",40),r(6),t(),i(7,"small",41),r(8),_(9,"date"),t()(),i(10,"span",42),r(11),t()()()),n&2){let e=d.$implicit;a(4),o(e.title),a(2),o(e.description),a(2),o(b(9,4,e.date,"longDate")),a(3),o(e.type)}}function V(n,d){if(n&1&&(i(0,"div",38)(1,"div",22)(2,"h4",23),r(3,"Academic Achievements"),t()(),i(4,"div",12),m(5,z,2,0,"div",27),i(6,"ul",24),m(7,U,12,7,"li",25),t()()()),n&2){let e=u(2);a(5),l("ngIf",e.student.achievements&&e.student.achievements.length===0),a(2),l("ngForOf",e.student.achievements)}}function Y(n,d){if(n&1&&(i(0,"div",8)(1,"div",9)(2,"div",10),v(3,"img",11),i(4,"div",12)(5,"h3",13),r(6),t(),i(7,"h6",14),r(8),t(),i(9,"p",15)(10,"strong"),r(11,"Student ID:"),t(),r(12),t(),i(13,"p",15)(14,"strong"),r(15,"Year Level:"),t(),r(16),t(),i(17,"p",15)(18,"strong"),r(19,"Major:"),t(),r(20),t(),i(21,"p",15)(22,"strong"),r(23,"Email:"),t(),r(24),t()()(),i(25,"div",16)(26,"a",17),v(27,"i",18),r(28," Back to Students "),t(),m(29,N,3,3,"a",19),t()(),i(30,"div",20)(31,"div",21)(32,"div",22)(33,"h4",23),r(34,"About"),t()(),i(35,"div",12)(36,"p",15),r(37),t()()(),i(38,"div",21)(39,"div",22)(40,"h4",23),r(41,"Academic Interests"),t()(),i(42,"div",12)(43,"ul",24),m(44,P,2,1,"li",25),t()()(),i(45,"div",26)(46,"div",22)(47,"h4",23),r(48,"Enrolled Courses"),t()(),i(49,"div",12),m(50,R,2,0,"div",27),i(51,"div",28),m(52,B,13,1,"table",29),t()()(),m(53,V,8,2,"div",30),t()()),n&2){let e=u();a(3),l("src",e.student.profileImage,x)("alt",e.student.name),a(3),o(e.student.name),a(2),o(e.student.program),a(4),c(" ",e.student.studentId,""),a(4),c(" ",e.student.yearLevel,""),a(4),c(" ",e.student.major,""),a(4),c(" ",e.student.email,""),a(2),l("routerLink",S(15,L)),a(3),l("ngIf",e.isAdmin),a(8),o(e.student.bio),a(7),l("ngForOf",e.student.academicInterests),a(6),l("ngIf",e.enrolledCourses.length===0),a(2),l("ngIf",e.enrolledCourses.length>0),a(),l("ngIf",e.isAdmin||e.isOwnProfile)}}var O=class n{constructor(d,e,s){this.route=d;this.studentService=e;this.courseService=s}student=null;enrolledCourses=[];loading=!0;isAdmin=!1;isOwnProfile=!1;ngOnInit(){this.isAdmin=localStorage.getItem("userRole")==="admin",this.route.paramMap.subscribe(d=>{let e=d.get("id");if(e){let s=localStorage.getItem("userId");s&&s===e&&(this.isOwnProfile=!0),this.loadStudent(+e)}else this.loading=!1})}loadStudent(d){this.loading=!0,this.studentService.getStudent(d).subscribe({next:e=>{this.student=e,e&&e.enrolledCourses&&e.enrolledCourses.length>0?this.loadEnrolledCourses(e.enrolledCourses):this.loading=!1},error:e=>{console.error("Error fetching student:",e),this.loading=!1}})}loadEnrolledCourses(d){this.courseService.getCourses().subscribe({next:e=>{this.enrolledCourses=e.filter(s=>d.includes(s.id)),this.loading=!1},error:e=>{console.error("Error fetching courses:",e),this.loading=!1}})}static \u0275fac=function(e){return new(e||n)(p(y),p(F),p(A))};static \u0275cmp=g({type:n,selectors:[["app-student-detail"]],decls:4,vars:3,consts:[[1,"container","mt-4"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"row"],[1,"col-md-4","mb-4"],[1,"card","border-danger"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title","text-danger"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"mt-3"],[1,"btn","btn-outline-secondary","me-2",3,"routerLink"],[1,"bi","bi-arrow-left"],["class","btn btn-outline-danger",3,"routerLink",4,"ngIf"],[1,"col-md-8"],[1,"card","mb-4"],[1,"card-header","bg-danger","text-white"],[1,"mb-0"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"card"],["class","alert alert-info",4,"ngIf"],[1,"table-responsive"],["class","table table-striped table-hover",4,"ngIf"],["class","card mt-4",4,"ngIf"],[1,"btn","btn-outline-danger",3,"routerLink"],[1,"bi","bi-pencil"],[1,"list-group-item"],[1,"alert","alert-info"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-danger",3,"routerLink"],[1,"card","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"text-muted"],[1,"badge","bg-success","rounded-pill"]],template:function(e,s){e&1&&(i(0,"div",0),m(1,j,4,0,"div",1)(2,M,2,0,"div",2)(3,Y,54,16,"div",3),t()),e&2&&(a(),l("ngIf",s.loading),a(),l("ngIf",!s.loading&&!s.student),a(),l("ngIf",s.student))},dependencies:[C,E,h,I,T,D],encapsulation:2})};export{O as StudentDetailComponent};
