import{b as G,c as m,d as V,e as D,g as L,i as j,j as B,m as U,s as z,u as H}from"./chunk-WRGOV7ZX.js";import{a as k}from"./chunk-JKVIU2IQ.js";import{g as A}from"./chunk-4BZPK5W5.js";import{Aa as y,Fa as I,Ib as T,Ja as u,Kb as q,Ob as x,Qa as a,Ta as t,Ua as i,Va as d,Za as M,_a as E,db as l,eb as R,lb as w,wa as o}from"./chunk-4NTA57OQ.js";import"./chunk-2NFLSA4Y.js";var N=r=>({"is-invalid":r});function K(r,n){if(r&1&&(t(0,"div",28),l(1),i()),r&2){let s=E();o(),R(s.errorMessage)}}function O(r,n){if(r&1&&(t(0,"div",29),l(1),i()),r&2){let s=E();o(),R(s.successMessage)}}function Q(r,n){r&1&&(t(0,"div",30),l(1," Full name is required. "),i())}function W(r,n){r&1&&(t(0,"div",30),l(1," Full name must be at least 3 characters. "),i())}function X(r,n){r&1&&(t(0,"div",30),l(1," Email is required. "),i())}function Y(r,n){r&1&&(t(0,"div",30),l(1," Please enter a valid email address. "),i())}function Z(r,n){r&1&&(t(0,"div",30),l(1," Password is required. "),i())}function $(r,n){r&1&&(t(0,"div",30),l(1," Password must be at least 6 characters. "),i())}function ee(r,n){r&1&&(t(0,"div",30),l(1," Please confirm your password. "),i())}function re(r,n){r&1&&(t(0,"div",30),l(1," Passwords do not match. "),i())}var J=class r{constructor(n,s,e){this.fb=n;this.authService=s;this.router=e;this.registerForm=this.fb.group({fullName:["",[m.required,m.minLength(3)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]],confirmPassword:["",[m.required]],role:["user",[m.required]]},{validators:this.passwordMatchValidator})}registerForm;errorMessage="";successMessage="";passwordMatchValidator(n){let s=n.get("password")?.value,e=n.get("confirmPassword")?.value;return s!==e?(n.get("confirmPassword")?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){this.registerForm.valid?this.authService.register({fullName:this.registerForm.value.fullName,email:this.registerForm.value.email,password:this.registerForm.value.password,role:this.registerForm.value.role}).subscribe(n=>{this.successMessage="Registration successful! Redirecting to login page...",setTimeout(()=>{this.router.navigate(["/auth/login"])},2e3)},n=>{this.errorMessage=n?.message||"Registration failed. Please try again."}):this.registerForm.markAllAsTouched()}static \u0275fac=function(s){return new(s||r)(y(z),y(k),y(A))};static \u0275cmp=I({type:r,selectors:[["app-register"]],decls:52,vars:24,consts:[[1,"register-container"],[1,"card"],[1,"card-header","bg-danger","text-white"],[1,"mb-0"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","fullName",1,"form-label"],["type","text","id","fullName","formControlName","fullName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-label"],[1,"form-check"],["type","radio","formControlName","role","id","roleStudent","value","student",1,"form-check-input"],["for","roleStudent",1,"form-check-label"],["type","radio","formControlName","role","id","roleTeacher","value","teacher",1,"form-check-input"],["for","roleTeacher",1,"form-check-label"],[1,"d-grid"],["type","submit",1,"btn","btn-danger",3,"disabled"],[1,"mt-3","text-center"],["routerLink","/auth/login",1,"text-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"invalid-feedback"]],template:function(s,e){if(s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4,"Create an Account"),i()(),t(5,"div",4),u(6,K,2,1,"div",5)(7,O,2,1,"div",6),t(8,"form",7),M("ngSubmit",function(){return e.onSubmit()}),t(9,"div",8)(10,"label",9),l(11,"Full Name"),i(),d(12,"input",10),u(13,Q,2,0,"div",11)(14,W,2,0,"div",11),i(),t(15,"div",8)(16,"label",12),l(17,"Email"),i(),d(18,"input",13),u(19,X,2,0,"div",11)(20,Y,2,0,"div",11),i(),t(21,"div",8)(22,"label",14),l(23,"Password"),i(),d(24,"input",15),u(25,Z,2,0,"div",11)(26,$,2,0,"div",11),i(),t(27,"div",8)(28,"label",16),l(29,"Confirm Password"),i(),d(30,"input",17),u(31,ee,2,0,"div",11)(32,re,2,0,"div",11),i(),t(33,"div",8)(34,"label",18),l(35,"Account Type"),i(),t(36,"div",19),d(37,"input",20),t(38,"label",21),l(39," Student "),i()(),t(40,"div",19),d(41,"input",22),t(42,"label",23),l(43," Teacher "),i()()(),t(44,"div",24)(45,"button",25),l(46,"Register"),i()(),t(47,"div",26)(48,"p"),l(49,"Already have an account? "),t(50,"a",27),l(51,"Login here"),i()()()()()()()),s&2){let p,g,c,C,f,v,S,h,_,b,F,P;o(6),a("ngIf",e.errorMessage),o(),a("ngIf",e.successMessage),o(),a("formGroup",e.registerForm),o(4),a("ngClass",w(16,N,((p=e.registerForm.get("fullName"))==null?null:p.invalid)&&((p=e.registerForm.get("fullName"))==null?null:p.touched))),o(),a("ngIf",((g=e.registerForm.get("fullName"))==null||g.errors==null?null:g.errors.required)&&((g=e.registerForm.get("fullName"))==null?null:g.touched)),o(),a("ngIf",((c=e.registerForm.get("fullName"))==null||c.errors==null?null:c.errors.minlength)&&((c=e.registerForm.get("fullName"))==null?null:c.touched)),o(4),a("ngClass",w(18,N,((C=e.registerForm.get("email"))==null?null:C.invalid)&&((C=e.registerForm.get("email"))==null?null:C.touched))),o(),a("ngIf",((f=e.registerForm.get("email"))==null||f.errors==null?null:f.errors.required)&&((f=e.registerForm.get("email"))==null?null:f.touched)),o(),a("ngIf",((v=e.registerForm.get("email"))==null||v.errors==null?null:v.errors.email)&&((v=e.registerForm.get("email"))==null?null:v.touched)),o(4),a("ngClass",w(20,N,((S=e.registerForm.get("password"))==null?null:S.invalid)&&((S=e.registerForm.get("password"))==null?null:S.touched))),o(),a("ngIf",((h=e.registerForm.get("password"))==null||h.errors==null?null:h.errors.required)&&((h=e.registerForm.get("password"))==null?null:h.touched)),o(),a("ngIf",((_=e.registerForm.get("password"))==null||_.errors==null?null:_.errors.minlength)&&((_=e.registerForm.get("password"))==null?null:_.touched)),o(4),a("ngClass",w(22,N,(((b=e.registerForm.get("confirmPassword"))==null?null:b.invalid)||(e.registerForm.errors==null?null:e.registerForm.errors.passwordMismatch))&&((b=e.registerForm.get("confirmPassword"))==null?null:b.touched))),o(),a("ngIf",((F=e.registerForm.get("confirmPassword"))==null||F.errors==null?null:F.errors.required)&&((F=e.registerForm.get("confirmPassword"))==null?null:F.touched)),o(),a("ngIf",(e.registerForm.errors==null?null:e.registerForm.errors.passwordMismatch)&&((P=e.registerForm.get("confirmPassword"))==null?null:P.touched)),o(13),a("disabled",e.registerForm.invalid)}},dependencies:[x,T,q,H,L,G,j,V,D,B,U],encapsulation:2})};export{J as RegisterComponent};
