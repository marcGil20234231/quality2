import{a as j}from"./chunk-ALZ4SZ4U.js";import{b as I,c,d as x,e as N,g as q,j as T,m as M,n as D,o as O,p as V,r as k,s as A,u as G}from"./chunk-WRGOV7ZX.js";import"./chunk-B2SMLHQB.js";import{e as C,g as y}from"./chunk-4BZPK5W5.js";import{Aa as d,Fa as S,Ja as a,Jb as _,Kb as h,Ob as E,Qa as s,Ta as t,Ua as e,Va as b,Za as g,db as r,eb as F,fb as R,wa as u}from"./chunk-4NTA57OQ.js";import"./chunk-2NFLSA4Y.js";function B(n,i){n&1&&(t(0,"div",23),r(1," Title is required "),e())}function L(n,i){n&1&&(t(0,"div",23),r(1," Description is required "),e())}function P(n,i){n&1&&(t(0,"div",23),r(1," Resource type is required "),e())}function U(n,i){n&1&&(t(0,"div",23),r(1," Valid URL is required "),e())}function $(n,i){if(n&1&&(t(0,"option",24),r(1),e()),n&2){let l=i.$implicit;s("value",l.id),u(),F(l.title)}}var w=class n{constructor(i,l,o,m){this.fb=i;this.resourceService=l;this.route=o;this.router=m;this.resourceForm=this.fb.group({title:["",c.required],description:["",c.required],type:["",c.required],url:["",[c.required,c.pattern("https?://.+")]],courseId:[""]})}resourceForm;isEditMode=!1;resourceId=null;courses=[];ngOnInit(){this.route.params.subscribe(i=>{i.id&&(this.isEditMode=!0,this.resourceId=+i.id,this.loadResource())}),this.resourceService.getCourses().subscribe(i=>{this.courses=i})}loadResource(){this.resourceId&&this.resourceService.getResource(this.resourceId).subscribe(i=>{this.resourceForm.patchValue(i)})}onSubmit(){if(this.resourceForm.valid){let i=this.resourceForm.value;this.isEditMode&&this.resourceId?this.resourceService.updateResource(this.resourceId,i).subscribe({next:()=>{this.router.navigate(["/resources"])},error:l=>{console.error("Error updating resource:",l),alert("Failed to update resource. Please try again.")}}):this.resourceService.createResource(i).subscribe({next:()=>{this.router.navigate(["/resources"])},error:l=>{console.error("Error creating resource:",l),alert("Failed to create resource. Please try again.")}})}}onCancel(){this.router.navigate(["/resources"])}static \u0275fac=function(l){return new(l||n)(d(A),d(j),d(C),d(y))};static \u0275cmp=S({type:n,selectors:[["app-resource-form"]],decls:46,vars:9,consts:[[1,"container","my-4"],[1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","required","",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","required","",1,"form-control"],["for","type",1,"form-label"],["id","type","formControlName","type","required","",1,"form-select"],["value",""],["value","document"],["value","video"],["value","link"],["value","other"],["for","url",1,"form-label"],["type","url","id","url","formControlName","url","required","",1,"form-control"],["for","courseId",1,"form-label"],["id","courseId","formControlName","courseId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-danger",3,"disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"invalid-feedback"],[3,"value"]],template:function(l,o){if(l&1&&(t(0,"div",0)(1,"h2"),r(2),e(),t(3,"form",1),g("ngSubmit",function(){return o.onSubmit()}),t(4,"div",2)(5,"label",3),r(6,"Title"),e(),b(7,"input",4),a(8,B,2,0,"div",5),e(),t(9,"div",2)(10,"label",6),r(11,"Description"),e(),b(12,"textarea",7),a(13,L,2,0,"div",5),e(),t(14,"div",2)(15,"label",8),r(16,"Resource Type"),e(),t(17,"select",9)(18,"option",10),r(19,"Select type"),e(),t(20,"option",11),r(21,"Document"),e(),t(22,"option",12),r(23,"Video"),e(),t(24,"option",13),r(25,"Link"),e(),t(26,"option",14),r(27,"Other"),e()(),a(28,P,2,0,"div",5),e(),t(29,"div",2)(30,"label",15),r(31,"URL"),e(),b(32,"input",16),a(33,U,2,0,"div",5),e(),t(34,"div",2)(35,"label",17),r(36,"Associated Course"),e(),t(37,"select",18)(38,"option",10),r(39,"Select course (optional)"),e(),a(40,$,2,2,"option",19),e()(),t(41,"div",20)(42,"button",21),r(43),e(),t(44,"button",22),g("click",function(){return o.onCancel()}),r(45,"Cancel"),e()()()()),l&2){let m,p,f,v;u(2),F(o.isEditMode?"Edit Resource":"Add New Resource"),u(),s("formGroup",o.resourceForm),u(5),s("ngIf",((m=o.resourceForm.get("title"))==null?null:m.invalid)&&((m=o.resourceForm.get("title"))==null?null:m.touched)),u(5),s("ngIf",((p=o.resourceForm.get("description"))==null?null:p.invalid)&&((p=o.resourceForm.get("description"))==null?null:p.touched)),u(15),s("ngIf",((f=o.resourceForm.get("type"))==null?null:f.invalid)&&((f=o.resourceForm.get("type"))==null?null:f.touched)),u(5),s("ngIf",((v=o.resourceForm.get("url"))==null?null:v.invalid)&&((v=o.resourceForm.get("url"))==null?null:v.touched)),u(7),s("ngForOf",o.courses),u(2),s("disabled",o.resourceForm.invalid),u(),R(" ",o.isEditMode?"Update":"Create"," Resource ")}},dependencies:[E,_,h,G,q,O,V,I,D,x,N,k,T,M],encapsulation:2})};export{w as ResourceFormComponent};
