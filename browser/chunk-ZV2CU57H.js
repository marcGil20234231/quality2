import{a as H}from"./chunk-PHU35YRT.js";import{b as j,c as u,d as k,e as D,g as R,j as G,k as O,l as P,m as Y,n as B,o as U,p as z,s as Z,u as $}from"./chunk-WRGOV7ZX.js";import"./chunk-B2SMLHQB.js";import{e as q,g as V,h as L,k as M}from"./chunk-4BZPK5W5.js";import{Aa as x,Fa as y,Ja as l,Jb as A,Kb as T,Ob as w,Qa as a,Sa as f,Ta as i,Ua as t,Va as s,Ya as b,Z as v,Za as S,_,_a as c,db as r,eb as E,fb as C,kb as F,lb as N,wa as m}from"./chunk-4NTA57OQ.js";import{a as h,b as I}from"./chunk-2NFLSA4Y.js";var K=n=>["/students",n],Q=()=>["/students"];function W(n,o){n&1&&(i(0,"div",9)(1,"div",10)(2,"span",11),r(3,"Loading..."),t()()())}function X(n,o){n&1&&(i(0,"div"),r(1,"Name is required"),t())}function ee(n,o){if(n&1&&(i(0,"div",50),l(1,X,2,0,"div",51),t()),n&2){let e=c(2);m(),a("ngIf",e.f.name.errors.required)}}function te(n,o){n&1&&(i(0,"div"),r(1,"Student ID is required"),t())}function ie(n,o){n&1&&(i(0,"div"),r(1,"Student ID must be alphanumeric"),t())}function ne(n,o){if(n&1&&(i(0,"div",50),l(1,te,2,0,"div",51)(2,ie,2,0,"div",51),t()),n&2){let e=c(2);m(),a("ngIf",e.f.studentId.errors.required),m(),a("ngIf",e.f.studentId.errors.pattern)}}function re(n,o){n&1&&(i(0,"div"),r(1,"Year level is required"),t())}function oe(n,o){if(n&1&&(i(0,"div",50),l(1,re,2,0,"div",51),t()),n&2){let e=c(2);m(),a("ngIf",e.f.yearLevel.errors.required)}}function me(n,o){n&1&&(i(0,"div"),r(1,"Program is required"),t())}function ae(n,o){if(n&1&&(i(0,"div",50),l(1,me,2,0,"div",51),t()),n&2){let e=c(2);m(),a("ngIf",e.f.program.errors.required)}}function de(n,o){n&1&&(i(0,"div"),r(1,"Major is required"),t())}function le(n,o){if(n&1&&(i(0,"div",50),l(1,de,2,0,"div",51),t()),n&2){let e=c(2);m(),a("ngIf",e.f.major.errors.required)}}function se(n,o){n&1&&(i(0,"div"),r(1,"Email is required"),t())}function ce(n,o){n&1&&(i(0,"div"),r(1,"Please enter a valid email"),t())}function ue(n,o){if(n&1&&(i(0,"div",50),l(1,se,2,0,"div",51)(2,ce,2,0,"div",51),t()),n&2){let e=c(2);m(),a("ngIf",e.f.email.errors.required),m(),a("ngIf",e.f.email.errors.email)}}function pe(n,o){if(n&1){let e=b();i(0,"div",52),s(1,"input",53),i(2,"button",54),S("click",function(){let p=v(e).index,g=c(2);return _(g.removeInterest(p))}),s(3,"i",55),t()()}if(n&2){let e=o.index;m(),a("formControlName",e)}}function fe(n,o){if(n&1){let e=b();i(0,"div")(1,"div",56)(2,"div",6)(3,"div",57)(4,"label",40),r(5,"Title "),i(6,"span",15),r(7,"*"),t()(),s(8,"input",58),t(),i(9,"div",57)(10,"label",40),r(11,"Description"),t(),s(12,"textarea",59),t(),i(13,"div",60)(14,"div",21)(15,"label",40),r(16,"Type"),t(),i(17,"select",61)(18,"option",62),r(19,"Academic"),t(),i(20,"option",63),r(21,"Sports"),t(),i(22,"option",64),r(23,"Arts"),t(),i(24,"option",65),r(25,"Leadership"),t(),i(26,"option",66),r(27,"Community Service"),t()()(),i(28,"div",21)(29,"label",40),r(30,"Date"),t(),s(31,"input",67),t()(),i(32,"button",68),S("click",function(){let p=v(e).index,g=c(2);return _(g.removeAchievement(p))}),s(33,"i",55),r(34," Remove "),t()()()()}if(n&2){let e=o.index;m(),a("formGroupName",e)}}function ve(n,o){if(n&1){let e=b();i(0,"form",12),S("ngSubmit",function(){v(e);let p=c();return _(p.onSubmit())}),i(1,"div",13)(2,"label",14),r(3,"Full Name "),i(4,"span",15),r(5,"*"),t()(),s(6,"input",16),l(7,ee,2,1,"div",17),t(),i(8,"div",13)(9,"label",18),r(10,"Student ID "),i(11,"span",15),r(12,"*"),t()(),s(13,"input",19),l(14,ne,3,2,"div",17),t(),i(15,"div",20)(16,"div",21)(17,"label",22),r(18,"Year Level "),i(19,"span",15),r(20,"*"),t()(),i(21,"select",23)(22,"option",24),r(23,"Select Year"),t(),i(24,"option",25),r(25,"First Year"),t(),i(26,"option",26),r(27,"Second Year"),t(),i(28,"option",27),r(29,"Third Year"),t(),i(30,"option",28),r(31,"Fourth Year"),t()(),l(32,oe,2,1,"div",17),t(),i(33,"div",21)(34,"label",29),r(35,"Program "),i(36,"span",15),r(37,"*"),t()(),s(38,"input",30),l(39,ae,2,1,"div",17),t()(),i(40,"div",13)(41,"label",31),r(42,"Major "),i(43,"span",15),r(44,"*"),t()(),s(45,"input",32),l(46,le,2,1,"div",17),t(),i(47,"div",13)(48,"label",33),r(49,"Email "),i(50,"span",15),r(51,"*"),t()(),s(52,"input",34),l(53,ue,3,2,"div",17),t(),i(54,"div",13)(55,"label",35),r(56,"Profile Image URL"),t(),s(57,"input",36),i(58,"small",37),r(59,"Enter a URL for the student's profile image"),t()(),i(60,"div",13)(61,"label",38),r(62,"Biography"),t(),s(63,"textarea",39),t(),i(64,"div",13)(65,"label",40),r(66,"Academic Interests"),t(),i(67,"div",41),l(68,pe,4,1,"div",42),t(),i(69,"button",43),S("click",function(){v(e);let p=c();return _(p.addInterest())}),s(70,"i",44),r(71," Add Interest "),t()(),i(72,"div",13)(73,"label",40),r(74,"Achievements"),t(),i(75,"div",45),l(76,fe,35,1,"div",46),t(),i(77,"button",43),S("click",function(){v(e);let p=c();return _(p.addAchievement())}),s(78,"i",44),r(79," Add Achievement "),t()(),i(80,"div",47)(81,"a",48),r(82," Cancel "),t(),i(83,"button",49),r(84),t()()()}if(n&2){let e=c();a("formGroup",e.studentForm),m(6),f("is-invalid",e.submitted&&e.f.name.errors),m(),a("ngIf",e.submitted&&e.f.name.errors),m(6),f("is-invalid",e.submitted&&e.f.studentId.errors),m(),a("ngIf",e.submitted&&e.f.studentId.errors),m(7),f("is-invalid",e.submitted&&e.f.yearLevel.errors),m(11),a("ngIf",e.submitted&&e.f.yearLevel.errors),m(6),f("is-invalid",e.submitted&&e.f.program.errors),m(),a("ngIf",e.submitted&&e.f.program.errors),m(6),f("is-invalid",e.submitted&&e.f.major.errors),m(),a("ngIf",e.submitted&&e.f.major.errors),m(6),f("is-invalid",e.submitted&&e.f.email.errors),m(),a("ngIf",e.submitted&&e.f.email.errors),m(15),a("ngForOf",e.academicInterests.controls),m(8),a("ngForOf",e.achievements.controls),m(5),a("routerLink",e.isEditMode?N(23,K,e.studentId):F(25,Q)),m(3),C(" ",e.isEditMode?"Update Student":"Create Student"," ")}}var J=class n{constructor(o,e,d,p){this.fb=o;this.route=e;this.router=d;this.studentService=p;this.studentForm=this.createForm()}studentForm;isEditMode=!1;studentId=null;loading=!1;submitted=!1;ngOnInit(){this.route.paramMap.subscribe(o=>{let e=o.get("id");e&&(this.isEditMode=!0,this.studentId=+e,this.loadStudent(+e))})}createForm(){return this.fb.group({name:["",u.required],studentId:["",[u.required,u.pattern("^[a-zA-Z0-9-]+$")]],yearLevel:["",u.required],program:["",u.required],major:["",u.required],email:["",[u.required,u.email]],profileImage:[""],bio:[""],academicInterests:this.fb.array([]),achievements:this.fb.array([])})}get f(){return this.studentForm.controls}get academicInterests(){return this.f.academicInterests}get achievements(){return this.f.achievements}loadStudent(o){this.loading=!0,this.studentService.getStudent(o).subscribe({next:e=>{for(;this.academicInterests.length;)this.academicInterests.removeAt(0);for(;this.achievements.length;)this.achievements.removeAt(0);this.studentForm.patchValue({name:e.name,studentId:e.studentId,yearLevel:e.yearLevel,program:e.program,major:e.major,email:e.email,profileImage:e.profileImage,bio:e.bio}),e.academicInterests&&e.academicInterests.length>0&&e.academicInterests.forEach(d=>{this.academicInterests.push(this.fb.control(d))}),e.achievements&&e.achievements.length>0&&e.achievements.forEach(d=>{this.achievements.push(this.fb.group({title:[d.title,u.required],description:[d.description],type:[d.type],date:[this.formatDate(d.date)]}))}),this.loading=!1},error:e=>{console.error("Error loading student:",e),this.loading=!1,this.router.navigate(["/students"])}})}formatDate(o){return o?new Date(o).toISOString().split("T")[0]:""}addInterest(){this.academicInterests.push(this.fb.control(""))}removeInterest(o){this.academicInterests.removeAt(o)}addAchievement(){this.achievements.push(this.fb.group({title:["",u.required],description:[""],type:["Academic"],date:[this.formatDate(new Date().toString())]}))}removeAchievement(o){this.achievements.removeAt(o)}onSubmit(){if(this.submitted=!0,this.studentForm.invalid){let e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"});return}let o=I(h({},this.studentForm.value),{id:this.isEditMode?this.studentId:Math.floor(Math.random()*1e4)});this.isEditMode?this.updateStudent(o):this.createStudent(o)}createStudent(o){this.loading=!0,this.studentService.addStudent(o).subscribe({next:()=>{this.router.navigate(["/students"])},error:e=>{console.error("Error creating student:",e),this.loading=!1}})}updateStudent(o){this.loading=!0,this.studentService.updateStudent(this.studentId,o).subscribe({next:()=>{this.router.navigate(["/students",this.studentId])},error:e=>{console.error("Error updating student:",e),this.loading=!1}})}static \u0275fac=function(e){return new(e||n)(x(Z),x(q),x(V),x(H))};static \u0275cmp=y({type:n,selectors:[["app-student-form"]],decls:10,vars:3,consts:[[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card","border-danger"],[1,"card-header","bg-danger","text-white"],[1,"mb-0"],[1,"card-body"],["class","text-center my-5",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","studentId",1,"form-label"],["type","text","id","studentId","formControlName","studentId",1,"form-control"],[1,"row","mb-3"],[1,"col-md-6"],["for","yearLevel",1,"form-label"],["id","yearLevel","formControlName","yearLevel",1,"form-select"],["value",""],["value","1"],["value","2"],["value","3"],["value","4"],["for","program",1,"form-label"],["type","text","id","program","formControlName","program",1,"form-control"],["for","major",1,"form-label"],["type","text","id","major","formControlName","major",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","profileImage",1,"form-label"],["type","text","id","profileImage","formControlName","profileImage",1,"form-control"],[1,"form-text","text-muted"],["for","bio",1,"form-label"],["id","bio","rows","4","formControlName","bio",1,"form-control"],[1,"form-label"],["formArrayName","academicInterests"],["class","input-group mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-plus-circle"],["formArrayName","achievements"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-4"],[1,"btn","btn-secondary",3,"routerLink"],["type","submit",1,"btn","btn-danger"],[1,"invalid-feedback"],[4,"ngIf"],[1,"input-group","mb-2"],["type","text",1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"card","mb-3",3,"formGroupName"],[1,"mb-2"],["type","text","formControlName","title",1,"form-control"],["rows","2","formControlName","description",1,"form-control"],[1,"row","mb-2"],["formControlName","type",1,"form-select"],["value","Academic"],["value","Sports"],["value","Arts"],["value","Leadership"],["value","Community"],["type","date","formControlName","date",1,"form-control"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),r(6),t()(),i(7,"div",6),l(8,W,4,0,"div",7)(9,ve,85,26,"form",8),t()()()()()),e&2&&(m(6),E(d.isEditMode?"Edit Student":"Add New Student"),m(2),a("ngIf",d.loading),m(),a("ngIf",!d.loading))},dependencies:[w,A,T,$,R,U,z,j,B,k,D,G,Y,O,P,M,L],encapsulation:2})};export{J as StudentFormComponent};
