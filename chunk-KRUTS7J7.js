import{a as D}from"./chunk-PHU35YRT.js";import{b as V,d as Y,f as N,t as A}from"./chunk-WRGOV7ZX.js";import"./chunk-B2SMLHQB.js";import{h as j,k as O}from"./chunk-4BZPK5W5.js";import{Aa as C,Fa as y,Ja as u,Jb as M,Kb as I,Ob as T,Qa as m,Sa as S,Ta as r,Ua as n,Va as h,Ya as v,Z as _,Za as d,_ as f,_a as p,db as l,eb as g,gb as w,hb as k,ib as L,kb as F,lb as E,ta as x,wa as s}from"./chunk-4NTA57OQ.js";import{a as b,b as P}from"./chunk-2NFLSA4Y.js";var B=()=>["/students/new"],W=o=>["/students",o];function $(o,e){if(o&1){let t=v();r(0,"li")(1,"a",11),d("click",function(){let a=_(t).$implicit,c=p();return f(c.setMajorFilter(a))}),l(2),n()()}if(o&2){let t=e.$implicit;s(2),g(t)}}function R(o,e){o&1&&(r(0,"a",20),h(1,"i",21),l(2," Add Student "),n()),o&2&&m("routerLink",F(1,B))}function q(o,e){o&1&&(r(0,"div",22)(1,"div",23)(2,"span",24),l(3,"Loading..."),n()()())}function z(o,e){o&1&&(r(0,"div",25),l(1," No students found matching your criteria. "),n())}function U(o,e){if(o&1&&(r(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),h(4,"img",30),n(),r(5,"div",31)(6,"div",32)(7,"h5",33),l(8),n(),r(9,"h6",34),l(10),n(),r(11,"p",35)(12,"span",36),l(13),n(),r(14,"span",37),l(15),n()(),r(16,"a",38),l(17,"View Profile"),n()()()()()()),o&2){let t=e.$implicit;s(4),m("src",t.profileImage,x)("alt",t.name),s(4),g(t.name),s(2),g(t.studentId),s(3),g(t.yearLevel),s(2),g(t.major),s(),m("routerLink",E(7,W,t.id))}}function G(o,e){if(o&1){let t=v();r(0,"li",41)(1,"a",46),d("click",function(){let a=_(t).$implicit,c=p(2);return f(c.changePage(a))}),l(2),n()()}if(o&2){let t=e.$implicit,i=p(2);S("active",t===i.currentPage),s(2),g(t)}}function H(o,e){if(o&1){let t=v();r(0,"nav",39)(1,"ul",40)(2,"li",41)(3,"a",42),d("click",function(){_(t);let a=p();return f(a.changePage(a.currentPage-1))}),r(4,"span",43),l(5,"\xAB"),n()()(),u(6,G,3,3,"li",44),r(7,"li",41)(8,"a",45),d("click",function(){_(t);let a=p();return f(a.changePage(a.currentPage+1))}),r(9,"span",43),l(10,"\xBB"),n()()()()()}if(o&2){let t=p();s(2),S("disabled",t.currentPage===1),s(4),m("ngForOf",t.getPageNumbers()),s(),S("disabled",t.currentPage===t.totalPages)}}var Q=class o{constructor(e){this.studentService=e}students=[];filteredStudents=[];availableMajors=["Computer Science","Information Technology","Software Engineering"];searchQuery="";yearFilter="";majorFilter="";loading=!0;isAdmin=!0;studentsPerPage=9;currentPage=1;totalPages=1;ngOnInit(){this.loadStudents()}loadStudents(){this.loading=!0,this.studentService.getStudents().subscribe({next:e=>{this.students=e.map(t=>P(b({},t),{profileImage:t.profileImage||"https://cdn-icons-png.flaticon.com/512/3135/3135715.png"})),this.filteredStudents=this.students,this.totalPages=Math.ceil(this.students.length/this.studentsPerPage),this.loading=!1},error:e=>{console.error("Error loading students:",e),this.loading=!1}})}extractAvailableMajors(){let e=new Set;this.students.forEach(t=>{t.major&&e.add(t.major)}),this.availableMajors=Array.from(e).sort()}filterStudents(){let e=this.students;if(this.searchQuery){let i=this.searchQuery.toLowerCase();e=e.filter(a=>a.name.toLowerCase().includes(i)||a.studentId.toLowerCase().includes(i)||a.email.toLowerCase().includes(i))}this.yearFilter&&(e=e.filter(i=>i.yearLevel===this.yearFilter)),this.majorFilter&&(e=e.filter(i=>i.major===this.majorFilter)),this.totalPages=Math.ceil(e.length/this.studentsPerPage),this.currentPage>this.totalPages&&(this.currentPage=this.totalPages>0?this.totalPages:1);let t=(this.currentPage-1)*this.studentsPerPage;this.filteredStudents=e.slice(t,t+this.studentsPerPage)}setYearFilter(e){this.yearFilter=e,this.currentPage=1,this.filterStudents()}setMajorFilter(e){this.majorFilter=e,this.currentPage=1,this.filterStudents()}changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.filterStudents())}getPageNumbers(){let e=[],i=Math.max(1,this.currentPage-Math.floor(2.5)),a=i+5-1;a>this.totalPages&&(a=this.totalPages,i=Math.max(1,a-5+1));for(let c=i;c<=a;c++)e.push(c);return e}static \u0275fac=function(t){return new(t||o)(C(D))};static \u0275cmp=y({type:o,selectors:[["app-student-list"]],decls:40,vars:7,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[1,"d-flex"],[1,"input-group","me-2"],["type","text","placeholder","Search students...",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline-secondary"],[1,"bi","bi-search"],[1,"dropdown"],["type","button","id","filterDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle"],["aria-labelledby","filterDropdown",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"dropdown-divider"],[4,"ngFor","ngForOf"],["class","btn btn-danger ms-2",3,"routerLink",4,"ngIf"],["class","text-center my-5",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","g-4"],["class","col",4,"ngFor","ngForOf"],["aria-label","Student pagination","class","mt-4",4,"ngIf"],[1,"btn","btn-danger","ms-2",3,"routerLink"],[1,"bi","bi-plus-circle"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[1,"alert","alert-info"],[1,"col"],[1,"card","h-100","border-danger"],[1,"row","g-0"],[1,"col-md-4"],[1,"img-fluid","rounded-start",3,"src","alt"],[1,"col-md-8"],[1,"card-body"],[1,"card-title","text-danger"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"badge","bg-secondary","me-1"],[1,"badge","bg-info"],[1,"btn","btn-sm","btn-outline-danger",3,"routerLink"],["aria-label","Student pagination",1,"mt-4"],[1,"pagination","justify-content-center"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"Students Directory"),n(),r(4,"div",3)(5,"div",4)(6,"input",5),L("ngModelChange",function(c){return k(i.searchQuery,c)||(i.searchQuery=c),c}),d("ngModelChange",function(){return i.filterStudents()}),n(),r(7,"button",6),h(8,"i",7),n()(),r(9,"div",8)(10,"button",9),l(11," Filter "),n(),r(12,"ul",10)(13,"li")(14,"a",11),d("click",function(){return i.setYearFilter("")}),l(15,"All Years"),n()(),r(16,"li")(17,"a",11),d("click",function(){return i.setYearFilter("1")}),l(18,"First Year"),n()(),r(19,"li")(20,"a",11),d("click",function(){return i.setYearFilter("2")}),l(21,"Second Year"),n()(),r(22,"li")(23,"a",11),d("click",function(){return i.setYearFilter("3")}),l(24,"Third Year"),n()(),r(25,"li")(26,"a",11),d("click",function(){return i.setYearFilter("4")}),l(27,"Fourth Year"),n()(),r(28,"li"),h(29,"hr",12),n(),r(30,"li")(31,"a",11),d("click",function(){return i.setMajorFilter("")}),l(32,"All Majors"),n()(),u(33,$,3,1,"li",13),n()(),u(34,R,3,2,"a",14),n()(),u(35,q,4,0,"div",15)(36,z,2,0,"div",16),r(37,"div",17),u(38,U,18,9,"div",18),n(),u(39,H,11,5,"nav",19),n()),t&2&&(s(6),w("ngModel",i.searchQuery),s(27),m("ngForOf",i.availableMajors),s(),m("ngIf",i.isAdmin),s(),m("ngIf",i.loading),s(),m("ngIf",!i.loading&&i.filteredStudents.length===0),s(2),m("ngForOf",i.filteredStudents),s(),m("ngIf",i.totalPages>1))},dependencies:[T,M,I,O,j,A,V,Y,N],styles:[".pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{cursor:pointer;color:#dc3545}.pagination[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545;color:#fff}"]})};export{Q as StudentListComponent};
